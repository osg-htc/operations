
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://osg-htc.org/operations/external-oasis-repos/">
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.0">
    
    
      
        <title>External OASIS repositories - OSG Operations</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.33e2939f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69012-29","opensciencegrid.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#external-oasis-repositories" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OSG Operations" class="md-header__button md-logo" aria-label="OSG Operations" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG Operations
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              External OASIS repositories
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/osg-htc/operations/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OSG Operations" class="md-nav__button md-logo" aria-label="OSG Operations" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Operations
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/osg-htc/operations/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Services
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/install-gwms-factory/" class="md-nav__link">
        Installing GlideinWMS Factory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/topology/" class="md-nav__link">
        Topology Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/topology-contacts-data/" class="md-nav__link">
        Topology and Contacts Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/finalize-cache-registration/" class="md-nav__link">
        Finalize Cache Registration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/sending-announcements/" class="md-nav__link">
        Sending Announcements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/gracc-corrections/" class="md-nav__link">
        GRACC Corrections
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/hosted-ce-definitions/" class="md-nav__link">
        Hosted CE Definitions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/ce-monitoring-dashboards/" class="md-nav__link">
        CE Monitoring Dashboards
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9" type="checkbox" id="__nav_2_9" >
      
      <label class="md-nav__link" for="__nav_2_9">
        Yum Repository
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Yum Repository" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_9">
          <span class="md-nav__icon md-icon"></span>
          Yum Repository
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/repository-scripts/" class="md-nav__link">
        Troubleshooting Guide for Yum Repository Scripts
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../services/adding-external-cvmfs-repos/" class="md-nav__link">
        Adding External CVMFS repos
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Service Level Agreements
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Service Level Agreements" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Service Level Agreements
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/general/" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/access-point/" class="md-nav__link">
        Access Point
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/collector/" class="md-nav__link">
        CE Collector
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/gracc/" class="md-nav__link">
        GRACC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/gwms-factory/" class="md-nav__link">
        GWMS Factory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/gwms-frontend/" class="md-nav__link">
        GWMS Frontend
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/htcss-central-manager/" class="md-nav__link">
        HTCSS Central Manager
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/hosted-ce/" class="md-nav__link">
        Hosted CE
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/message-broker/" class="md-nav__link">
        Message Broker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/oasis/" class="md-nav__link">
        OASIS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/osdf-core/" class="md-nav__link">
        OSDF Core
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/osdf-cache/" class="md-nav__link">
        OSDF Cache
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/osdf-origin/" class="md-nav__link">
        OSDF Origin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/perfsonar/" class="md-nav__link">
        PerfSonar
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/software-repo/" class="md-nav__link">
        Software Repository
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/topology/" class="md-nav__link">
        Topology
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/web-pages/" class="md-nav__link">
        Web Pages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SLA/xdlogin/" class="md-nav__link">
        XDLogin
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          External OASIS repositories
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        External OASIS repositories
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requests-to-host-a-repository-on-oasis" class="md-nav__link">
    Requests to Host a Repository on OASIS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-to-change-the-url-of-an-external-repository" class="md-nav__link">
    Requests to Change the URL of an External Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-to-remove-an-external-repository" class="md-nav__link">
    Requests to Remove an External Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#response-to-security-incident-on-an-external-repository" class="md-nav__link">
    Response to Security Incident on an External Repository
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requests-to-host-a-repository-on-oasis" class="md-nav__link">
    Requests to Host a Repository on OASIS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-to-change-the-url-of-an-external-repository" class="md-nav__link">
    Requests to Change the URL of an External Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-to-remove-an-external-repository" class="md-nav__link">
    Requests to Remove an External Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#response-to-security-incident-on-an-external-repository" class="md-nav__link">
    Response to Security Incident on an External Repository
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/osg-htc/operations/edit/master/docs/external-oasis-repos.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="external-oasis-repositories">External OASIS Repositories</h1>
<p>We offer hosting of non-OSG CVMFS repositories on OASIS. This means that requests to create, rename, remove, or blanking OASIS repositories will come in as GOC tickets. This document contains instructions for handling those tickets.</p>
<div class="admonition note">
<p class="admonition-title">Also see</p>
<ul>
<li><a href="https://opensciencegrid.org/technology/policy/external-oasis-repos/">Policy for OSG Mirroring of External CVMFS repositories</a></li>
<li><a href="https://opensciencegrid.org/docs/data/external-oasis-repos/">External OASIS repository</a></li>
</ul>
</div>
<h2 id="requests-to-host-a-repository-on-oasis">Requests to Host a Repository on OASIS</h2>
<ol>
<li>
<p>Ensure that the repository administrator is valid for the VO. This can be done by (a) OSG already having a
    relationship with the person or (b) the contacting the VO manager to find out. Also, the person should be
    listed in the OSG topology <a href="https://topology.opensciencegrid.org/contacts">contacts list</a>.</p>
</li>
<li>
<p>Review provided URL and verify that it is appropriate for the VO and no other project uses it already. In order to make 
    sure the name in URL is appropriate, check that the name is derived from the VO name or one of its projects.
    Then, add the repository URL to the topology for given VO under the <code>OASISRepoURLs</code>. This should cause 
    the repository's configuration to be added to the OSG Stratum-0 within 15 minutes after URL is added into the topology.
    For example, if new URL is for the VO DUNE <code>http://hcc-cvmfs-repo.unl.edu:8000/cvmfs/dune.osgstorage.org</code> 
    edit the following under the OASIS section and create PR:</p>
<div class="codehilite"><pre><span></span><code><span class="go">git clone git://github.com/opensciencegrid/topology.git</span>
<span class="go">vim topology/virtual-organizations/DUNE.yaml</span>
<span class="go">...</span>
<span class="go">OASIS:</span>
<span class="go">  OASISRepoURLs:</span>
<span class="go">  - http://hcc-cvmfs-repo.unl.edu:8000/cvmfs/dune.osgstorage.org/</span>
<span class="go">...</span>
</code></pre></div>

<p>When the PR is approved, check on the <code>oasis.opensciencegrid.org</code> host whether the new repository was successfuly signed.
There should be message about it in the log file <code>/var/log/oasis/generate_whitelists.log</code>:</p>
<p><code>Tue Sep 25 17:34:02 2018 Running add_osg_repository http://hcc-cvmfs-repo.unl.edu:8000/cvmfs/dune.osgstorage.org
dune.osgstorage.org: Signing 7 day whitelist with masterkeycard... done</code></p>
</li>
<li>
<p>If the respository ends in a new domain name that has not been distributed before, 
    a new domain key will be needed on oasis-replica which should get automatically downloaded from 
    the etc/cvmfs/keys directory in the master branch of the <a href="https://github.com/cvmfs-contrib/config-repo">config-repo github repository</a>.
    There should be a message about downloading it in the log file <code>/var/log/cvmfs/generate_replicas.log</code>.
    After the key is downloaded the repository should also be automatically added, with messages in the same log file.</p>
<p>After the repository is successfully on oasis-replica, in addition you need to update the
OSG configuration repository.  Make changes in a workspace cloned from the
<a href="https://github.com/cvmfs-contrib/config-repo">config-repo github repository</a>
and use the osg branch (or a branch made from it) in a personal account on <code>oasis-itb</code>.
Add a domain configuration in <code>etc/cvmfs/domain.d</code> that's a lot like one of the other imported domains, for example <code>egi.eu.conf</code>.
The server urls might be slightly different; use the URLs of the stratum 1s where it is already hosted if there are any,
and you can add at least the FNAL and BNL stratum 1s.
Copy key(s) for the domain into <code>etc/cvmfs/keys</code> from the master branch, either a single .pub file or a directory, whichever the master branch has.
Test all these changes out on the <code>config-osg.opensciencegrid.org</code> repository on <code>oasis-itb</code>
using the <code>copy_config_osg</code> command, and configure a test client to read from <code>oasis-itb.opensciencegrid.org</code>
instead of <code>oasis.opensciencegrid.org</code>.
Then commit those changes into a new branch you made from the osg branch, and make a pull request.
Once that PR is approved and merged, log in to the oasis machine and run <code>copy_config_osg</code> as root there
to copy from github to the production configuration repository on the oasis machine.</p>
</li>
<li>
<p>If the repository name does not match <code>*.opensciencegrid.org</code> or <code>*.osgstorage.org</code>, skip this step and go on to your next step.
    If it does match one of those two patterns, then respond to the ticket to tell the administrator to continue with their next step (their step 4).<br />
    We don't want them to continue before 15 minutes has elapsed after step 2 above, so either wait that much time or tell them the time they may proceed (15 minutes after you updated topology).
    Then wait until the admin has updated the ticket to indicate that they have completed their step before moving on. </p>
</li>
<li>
<p>Ask the administrator of the BNL stratum 1 (John De Stefano) to also add the new repository. The BNL Stratum-1 administrator
    should set the service to read from
    <code>http://oasis-replica.opensciencegrid.org:8002/cvmfs/&lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</code>. When the BNL
    Stratum-1 administrator has reported back that the replication is ready, respond to the requester that the repository is
    fully replicated on the OSG and close the ticket.</p>
</li>
</ol>
<h2 id="requests-to-change-the-url-of-an-external-repository">Requests to Change the URL of an External Repository</h2>
<p>If there is a request to change the URL of an external repository, update the registered value in <code>OASISRepoURLs</code> for the respective VO in the topology.<br />
Tell the requester that it is ready 15 minutes after topology is updated.</p>
<h2 id="requests-to-remove-an-external-repository">Requests to Remove an External Repository</h2>
<ol>
<li>
<p>After validating that the ticket submitter is authorized by the VO's OASIS manager, delete the registered value
    for <EXAMPLE.OPENSCIENCEGRID.ORG> in topology for the VO in OASIS Repo URLs.
    Verify that it is removed by running the following on any oasis machine
    to make sure it is missing from the list:</p>
<div class="codehilite"><pre><span></span><code><span class="go">print_osg_repos|grep &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</span>
</code></pre></div>

</li>
<li>
<p>Check if the repository has been replicated to RAL by looking in their
    <a href="http://cernvmfs.gridpp.rl.ac.uk:8000/cvmfs/info/v1/repositories.json">repositories.json</a>.
    The <a href="https://osg-htc.org/docs/data/external-oasis-repos/#removing-a-repository-from-oasis">user documentation</a>
    requests the user to make a GGUS ticket to do this, so either ask them to do it or do it yourself.</p>
</li>
<li>
<p>Add the BNL Stratum-1 operator (John De Stefano) to the ticket and ask him to remove the repository. Wait for
    him to finish before proceeding.</p>
</li>
<li>
<p>Add the FNAL Stratum-1 operators (Merina Albert, Hyun Woo Kim)
    and SAMPA Stratum-1 operator (Ricardo Romao Da Silva) to the ticket
    and ask them when they can be ready to delete the repository.
    They can't remove it before it is removed from oasis-replica because
    their Stratum-1s automatically add all repositories oasis-replica has.
    However, they have to remove the repository within 8 hours of removal
    on oasis-replica or an alarm will start going off.</p>
</li>
<li>
<p>Run the following command on <code>oasis</code>, <code>oasis-itb</code>, <code>oasis-replica</code> and <code>oasis-replica-itb</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="go">remove_osg_repository -f &lt;EXAMPLE.OPENSCIENCEGRID.ORG&gt;</span>
</code></pre></div>

</li>
<li>
<p>Tell the FNAL Stratum-1 operators to go ahead and remove the repository.</p>
</li>
</ol>
<h2 id="response-to-security-incident-on-an-external-repository">Response to Security Incident on an External Repository</h2>
<p>If there is a security incident on the publishing machine of an
external repository and a publishing key is compromised, the
fingerprint of that key should be added to
<code>/cvmfs/config-osg.opensciencegrid.org/etc/cvmfs/blacklist</code>.
In addition, another line should be added in the form
<code>&lt;repository.name NNN</code> with the repository name and a revision
number that's one higher than the currently published revision.
For more details see the
<a href="https://cvmfs.readthedocs.io/en/stable/cpt-details.html#blacklisting">cvmfs documentation on blacklisting</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../SLA/xdlogin/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              XDLogin
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.d892486b.min.js"></script>
      
    
  </body>
</html>